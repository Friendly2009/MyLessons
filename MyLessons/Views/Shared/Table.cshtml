@using MyLessons.ConverterSQLClass;
@{
	List<lesson> ClassLessons = new List<lesson>();
	if(!(ViewBag.Lessons is null))
	{
		for(int i = 0; i < ViewBag.Lessons.Count; i++)
		{
			if(ViewBag.Lessons[i].clas == ViewBag.Clas)
			{
				ClassLessons.Add(ViewBag.Lessons[i]);
			}
		}
	}	
	void GetElementTable(int num,int day)
	{
		for(int i = 0; i < ClassLessons.Count; i++)
		{
			if (ClassLessons[i].day == $"{day}" && ClassLessons[i].number == $"{num}")
			{
				<p class="m-1" id="paragraph_Less">@ClassLessons[i].less</p>
				<p class="m-1" id="paragraph_Room">@ClassLessons[i].room</p>
				<p class="m-1" id="paragraph_Teacher">@ClassLessons[i].teacher</p>
				<input type="hidden" id="day" value="@ClassLessons[i].day"/>
				<input type="hidden" id="number" value="@ClassLessons[i].number" />
				<input type="hidden" id="less" value="@ClassLessons[i].less" />
				<input type="hidden" id="teacher" value="@ClassLessons[i].teacher" />
				<input type="hidden" id="room" value="@ClassLessons[i].room" />
				<input type="hidden" id="clas" value="@ClassLessons[i].clas" />
			}
		}
	}
}
<div>
	<div class="row justify-content-center container">
		@{
			for (int i = 0; i < ViewBag.socials.Count; i++)
			{
				<form asp-action="Choose" asp-controller="Main" class="col-1 m-1">					
					<input type="hidden" name="clas" value="@ViewBag.socials[i]" />
					<button type="submit" class="btn btn-dark w-100">@ViewBag.socials[i]</button>
				</form>
			}
		}
	</div>
	<h1 class="align-content-center" id="CurrentClass">@ViewBag.Clas</h1>
	<table class="table">
		<tr>
			<td>@ViewBag.Clas</td>
			<td>Понедельник</td>
			<td>Вторник</td>
			<td>Среда</td>
			<td>Четверг</td>
			<td>Пятница</td>
			<td>Суббота</td>
		</tr>
		<tr>
			<td>1</td>
			<td style="width: 250px" day="1" lesson="1">@{GetElementTable(1, 1);}</td>
			<td style="width: 250px" day="2" lesson="1">@{GetElementTable(1, 2);}</td>
			<td style="width: 250px" day="3" lesson="1">@{GetElementTable(1, 3);}</td>
			<td style="width: 250px" day="4" lesson="1">@{GetElementTable(1, 4);}</td>
			<td style="width: 250px" day="5" lesson="1">@{GetElementTable(1, 5);}</td>
			<td style="width: 250px" day="6" lesson="1">@{GetElementTable(1, 6);}</td>
		</tr>
		<tr>
			<td>2</td>
			<td style="width: 250px" day="1" lesson="2">@{GetElementTable(2, 1);}</td>
			<td style="width: 250px" day="2" lesson="2">@{GetElementTable(2, 2);}</td>
			<td style="width: 250px" day="3" lesson="2">@{GetElementTable(2, 3);}</td>
			<td style="width: 250px" day="4" lesson="2">@{GetElementTable(2, 4);}</td>
			<td style="width: 250px" day="5" lesson="2">@{GetElementTable(2, 5);}</td>
			<td style="width: 250px" day="6" lesson="2">@{GetElementTable(2, 6);}</td>
		</tr>
		<tr>
			<td>3</td>
			<td style="width: 250px" day="1" lesson="3">@{GetElementTable(3, 1);}</td>
			<td style="width: 250px" day="2" lesson="3">@{GetElementTable(3, 2);}</td>
			<td style="width: 250px" day="3" lesson="3">@{GetElementTable(3, 3);}</td>
			<td style="width: 250px" day="4" lesson="3">@{GetElementTable(3, 4);}</td>
			<td style="width: 250px" day="5" lesson="3">@{GetElementTable(3, 5);}</td>
			<td style="width: 250px" day="6" lesson="3">@{GetElementTable(3, 6);}</td>
		</tr>
		<tr>
			<td>4</td>
			<td style="width: 250px" day="1" lesson="4">@{GetElementTable(4, 1);}</td>
			<td style="width: 250px" day="2" lesson="4">@{GetElementTable(4, 2);}</td>
			<td style="width: 250px" day="3" lesson="4">@{GetElementTable(4, 3);}</td>
			<td style="width: 250px" day="4" lesson="4">@{GetElementTable(4, 4);}</td>
			<td style="width: 250px" day="5" lesson="4">@{GetElementTable(4, 5);}</td>
			<td style="width: 250px" day="6" lesson="4">@{GetElementTable(4, 6);}</td>
		</tr>
		<tr>
			<td>5</td>
			<td style="width: 250px" day="1" lesson="5">@{GetElementTable(5, 1);}</td>
			<td style="width: 250px" day="2" lesson="5">@{GetElementTable(5, 2);}</td>
			<td style="width: 250px" day="3" lesson="5">@{GetElementTable(5, 3);}</td>
			<td style="width: 250px" day="4" lesson="5">@{GetElementTable(5, 4);}</td>
			<td style="width: 250px" day="5" lesson="5">@{GetElementTable(5, 5);}</td>
			<td style="width: 250px" day="6" lesson="5">@{GetElementTable(5, 6);}</td>
		</tr>
		<tr>
			<td>6</td>
			<td style="width: 250px" day="1" lesson="6">@{GetElementTable(6, 1);}</td>
			<td style="width: 250px" day="2" lesson="6">@{GetElementTable(6, 2);}</td>
			<td style="width: 250px" day="3" lesson="6">@{GetElementTable(6, 3);}</td>
			<td style="width: 250px" day="4" lesson="6">@{GetElementTable(6, 4);}</td>
			<td style="width: 250px" day="5" lesson="6">@{GetElementTable(6, 5);}</td>
			<td style="width: 250px" day="6" lesson="6">@{GetElementTable(6, 6);}</td>
		</tr>
		<tr>
			<td>7</td>
			<td style="width: 250px" day="1" lesson="7">@{GetElementTable(7, 1);}</td>
			<td style="width: 250px" day="2" lesson="7">@{GetElementTable(7, 2);}</td>
			<td style="width: 250px" day="3" lesson="7">@{GetElementTable(7, 3);}</td>
			<td style="width: 250px" day="4" lesson="7">@{GetElementTable(7, 4);}</td>
			<td style="width: 250px" day="5" lesson="7">@{GetElementTable(7, 5);}</td>
			<td style="width: 250px" day="6" lesson="7">@{GetElementTable(7, 6);}</td>
		</tr>
		<tr>
			<td>8</td>
			<td style="width: 250px" day="1" lesson="8">@{GetElementTable(8, 1);}</td>
			<td style="width: 250px" day="2" lesson="8">@{GetElementTable(8, 2);}</td>
			<td style="width: 250px" day="3" lesson="8">@{GetElementTable(8, 3);}</td>
			<td style="width: 250px" day="4" lesson="8">@{GetElementTable(8, 4);}</td>
			<td style="width: 250px" day="5" lesson="8">@{GetElementTable(8, 5);}</td>
			<td style="width: 250px" day="6" lesson="8">@{GetElementTable(8, 6);}</td>
		</tr>
		<tr>
			<td>9</td>
			<td style="width: 250px" day="1" lesson="9">@{GetElementTable(9, 1);}</td>
			<td style="width: 250px" day="2" lesson="9">@{GetElementTable(9, 2);}</td>
			<td style="width: 250px" day="3" lesson="9">@{GetElementTable(9, 3);}</td>
			<td style="width: 250px" day="4" lesson="9">@{GetElementTable(9, 4);}</td>
			<td style="width: 250px" day="5" lesson="9">@{GetElementTable(9, 5);}</td>
			<td style="width: 250px" day="6" lesson="9">@{GetElementTable(9, 6);}</td>
		</tr>
	</table>
	<div class="row justify-content-center">
		<div class="row justify-content-center col-8">
			<input type="number" class="form-check col-8 m-3" value="0" placeholder="Номер кабинета" id="NumberRoomInput"/>
		</div>
		<div class="row justify-content-center col-8">
			<button class="btn btn-dark col-12 mb-2" type="button" data-bs-toggle="collapse" data-bs-target="#TeacherDiv" aria-expanded="false" aria-controls="TeacherDiv">
				Учителя
			</button>
		</div>
		<div class="collapse col-8" id="TeacherDiv">
			@for (int i = 0; i < ViewBag.teachers.Count; i++)
			{
				<div class="row justify-content-center align-items-center mb-2" style="margin: 10px 0;" id="parentAddLessonDiv">
					<p class="col-2 mb-0" id="IdTeachersForNewLesson">@ViewBag.teachers[i]</p>
					<p class="col-2 mb-0" id="IdObjectForNewLesson">@ViewBag.objects[i]</p>
					<button class="btn btn-dark col-3" id="AddLesson">Назначить урок</button>
					
					<form asp-action="DeleteTeacher" asp-controller="Home" method="get" class="col-2 d-flex justify-content-end mb-0">
						<input type="hidden" name="name" value="@ViewBag.teachers[i]"/>
						<input type="hidden" name="adres" value="Table" />
						<button class="btn btn-close btn-dark" type="submit"></button>
					</form>
				</div>
			}
			<form asp-action="AddTeacher" method="post" class="row justify-content-center m-2">
				<p>Добавить учителя</p>
				<input type="text" class="form-control col-3" placeholder="Имя учителя" name="teacherName" required>
				<input type="text" name="selectedSubject" class="form-control col-6 m-2" placeholder="Предмет" />
				<button class="btn btn-dark col-6 m-2" type="submit">Добавить учителя</button>
			</form>
		</div>

		<div class="row justify-content-center">
			<button class="btn btn-dark col-8 m-3" id="deleteLessonButton">
				Удалить Урок
			</button>
		</div>
		<form asp-action="SaveChanges" asp-controller="Main" class="row justify-content-center m-1">
			<input type="hidden" name="data" id="data" value="@ViewBag.data" />
			<input type="hidden" name="clas" value="@ViewBag.Clas" />
			<button class="btn btn-dark col-8">Сохранить изменения</button>
		</form>
	</div>
</div>
